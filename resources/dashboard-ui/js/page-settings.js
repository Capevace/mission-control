(self.webpackChunkmission_control_dashboard=self.webpackChunkmission_control_dashboard||[]).push([[539],{4571:function(e,t,r){"use strict";r.d(t,{r:function(){return u}});var s=r(7757),a=r.n(s);function n(e,t,r,s,a,n,o){try{var i=e[n](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var o=e.apply(t,r);function i(e){n(o,s,a,i,l,"next",e)}function l(e){n(o,s,a,i,l,"throw",e)}i(void 0)}))}}var i="/users";function l(e,t){return p.apply(this,arguments)}function p(){return(p=o(a().mark((function e(t,r){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u={all:function(){return o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(i,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}});case 2:if(!(t=e.sent).error){e.next=6;break}throw console.error("USERS API GET /users",t.error),new Error(t.error.message);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},update:function(e){return o(a().mark((function t(){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("".concat(i,"/").concat(e.username),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:e})});case 2:if(!(r=t.sent).error){t.next=6;break}throw console.error("USERS API PATCH /users/:username",r.error),new Error(r.error.message);case 6:case"end":return t.stop()}}),t)})))()},updatePassword:function(e,t){return o(a().mark((function r(){var s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l("".concat(i,"/").concat(e,"/change-password"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:t})});case 2:if(!(s=r.sent).error){r.next=6;break}throw console.error("USERS API PATCH /users/:username/update-password",s.error),new Error(s.error.message);case 6:case"end":return r.stop()}}),r)})))()}}},4335:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(7757),a=r.n(s),n=r(4571),o={props:["value"],data:function(e){return{editedUser:e.value}},watch:{user:function(){this.editedUser=this.user},editedUser:function(){this.$emit("input",this.editedUser)}},methods:{save:function(){this.$emit("save")}}},i=r(1900),l=(0,i.Z)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"shadow sm:rounded-2xl sm:overflow-hidden",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("div",{staticClass:"px-4 py-5 bg-purple-900 space-y-8 sm:p-6"},[r("div",{staticClass:"grid grid-cols-3 gap-6"},[r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"name"}},[e._v("\n\t\t\t\t\tDisplay Name\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.displayName,expression:"editedUser.displayName"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"text",name:"name",id:"name",placeholder:"Display Name"},domProps:{value:e.editedUser.displayName},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"displayName",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"username"}},[e._v("\n\t\t\t\t\tUsername\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.username,expression:"editedUser.username"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"text",name:"username",id:"username",placeholder:"Username"},domProps:{value:e.editedUser.username},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"username",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"password"}},[e._v("\n\t\t\t\t\tPassword\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.password,expression:"editedUser.password"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"password",name:"password",id:"password",placeholder:"Leave empty to keep current password"},domProps:{value:e.editedUser.password},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"password",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"avatarUrl"}},[e._v("\n\t\t\t\t\tAvatar URL\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.avatarUrl,expression:"editedUser.avatarUrl"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"url",name:"avatarUrl",id:"avatarUrl"},domProps:{value:e.editedUser.avatarUrl},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"avatarUrl",t.target.value)}}})])])]),e._v(" "),e._m(0)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-4 py-3 bg-purple-800 text-right sm:px-6"},[r("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",attrs:{type:"submit"}},[e._v("\n\t\t\tSave\n\t\t")])])}],!1,null,null,null).exports,p={props:["value"],data:function(e){return{newPassword:"",repeatNewPassword:""}},methods:{save:function(){this.newPassword===this.repeatNewPassword?(this.$emit("update-password",this.newPassword),this.newPassword="",this.repeatNewPassword=""):alert("The new passwords to not match")}}},u=(0,i.Z)(p,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"shadow sm:rounded-2xl sm:overflow-hidden",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("div",{staticClass:"px-4 py-5 bg-purple-900 space-y-8 sm:p-6"},[r("div",{staticClass:"grid grid-cols-3 gap-6"},[r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"password"}},[e._v("\n\t\t\t\t\tNew password\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"password",name:"new_password",id:"new-password",autocomplete:"new-password",placeholder:"Leave empty to keep current password",required:""},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"block text-sm font-medium text-purple-300 mb-2",attrs:{for:"password"}},[e._v("\n\t\t\t\t\tRepeat new password\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatNewPassword,expression:"repeatNewPassword"}],staticClass:"text-sm outline-none bg-purple-800 w-full rounded-lg border-2 border-transparent hover:shadow-lg focus:shadow-lg focus:border-purple-500 px-4 py-2 text-purple-200 placeholder-purple-400 font-semibold",attrs:{type:"password",name:"new_password_repeat",id:"new-password-repeat",autocomplete:"new-password",placeholder:"Leave empty to keep current password",required:""},domProps:{value:e.repeatNewPassword},on:{input:function(t){t.target.composing||(e.repeatNewPassword=t.target.value)}}})])])]),e._v(" "),e._m(0)])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-4 py-3 bg-purple-800 text-right sm:px-6"},[r("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",attrs:{type:"submit"}},[e._v("\n\t\t\tChange Password\n\t\t")])])}],!1,null,null,null).exports,d=r(8927),c=r(2776);function m(e,t,r,s,a,n,o){try{var i=e[n](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var n=e.apply(t,r);function o(e){m(n,s,a,o,i,"next",e)}function i(e){m(n,s,a,o,i,"throw",e)}o(void 0)}))}}var f={data:function(e){return{editedUser:e.$store.state.user}},methods:{save:function(){var e=this;return v(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.r.update(e.editedUser);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()},updatePassword:function(e){var t=this;return v(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.r.updatePassword(t.$store.state.user.username,e);case 3:alert("Your password was changed."),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.error(r.t0),alert(r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()}},computed:{user:function(){return this.$store.state.user}},watch:{user:function(){this.editedUser=this.user}},components:{profileForm:l,passwordForm:u,topBarActions:d.Z,topBarButton:c.Z}},w=(0,i.Z)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"dashboard-page p-5 md:p-12"},[r("div",{staticClass:"max-w-4xl"},[r("div",{staticClass:"md:grid md:grid-cols-3 md:gap-6 mb-10"},[e._m(0),e._v(" "),r("div",{staticClass:"mt-5 md:mt-0 md:col-span-2"},[r("profile-form",{on:{save:e.save},model:{value:e.editedUser,callback:function(t){e.editedUser=t},expression:"editedUser"}})],1)]),e._v(" "),r("div",{staticClass:"md:grid md:grid-cols-3 md:gap-6"},[e._m(1),e._v(" "),r("div",{staticClass:"mt-5 md:mt-0 md:col-span-2"},[r("password-form",{on:{"update-password":e.updatePassword}})],1)])]),e._v(" "),r("top-bar-actions",[r("top-bar-button",{on:{click:function(t){return t.preventDefault(),e.save(t)}}},[e._v("Save Changes")])],1)],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:col-span-1"},[r("div",{staticClass:"px-4 sm:px-0"},[r("h3",{staticClass:"text-lg leading-6 text-purple-100 font-semibold"},[e._v("\n\t\t\t\t\t\tProfile\n\t\t\t\t\t")]),e._v(" "),r("p",{staticClass:"mt-1 text-sm text-purple-400"},[e._v("\n\t\t\t\t\t\tSettings regarding your Mission Control account.\n\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"md:col-span-1"},[r("div",{staticClass:"px-4 sm:px-0"},[r("h3",{staticClass:"text-lg leading-6 text-purple-100 font-semibold"},[e._v("\n\t\t\t\t\t\tSecurity\n\t\t\t\t\t")]),e._v(" "),r("p",{staticClass:"mt-1 text-sm text-purple-400"},[e._v("\n\t\t\t\t\t\tSettings regarding your Mission Control account.\n\t\t\t\t\t")])])])}],!1,null,null,null).exports}}]);