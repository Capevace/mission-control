(self.webpackChunkmission_control_dashboard=self.webpackChunkmission_control_dashboard||[]).push([[734],{14571:function(e,t,r){"use strict";r.d(t,{r:function(){return l}});var s=r(87757),n=r.n(s);function a(e,t,r,s,n,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(s,n){var o=e.apply(t,r);function i(e){a(o,s,n,i,u,"next",e)}function u(e){a(o,s,n,i,u,"throw",e)}i(void 0)}))}}var i="/users";function u(e,t){return c.apply(this,arguments)}function c(){return(c=o(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l={all:function(){return o(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}});case 2:if(!(t=e.sent).error){e.next=6;break}throw console.error("USERS API GET /users",t.error),new Error(t.error.message);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))()},find:function(e){return o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u("".concat(i,"/").concat(e));case 2:if(!(r=t.sent).error){t.next=6;break}throw console.error("USERS API GET /users/"+e,r.error),new Error(r.error.message);case 6:return t.abrupt("return",r.user);case 7:case"end":return t.stop()}}),t)})))()},create:function(e){return o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u("".concat(i),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:e})});case 2:if(!(r=t.sent).error){t.next=6;break}throw console.error("USERS API PATCH /users/:username",r.error),new Error(r.error.message);case 6:case"end":return t.stop()}}),t)})))()},delete:function(e){return o(n().mark((function t(){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u("".concat(i,"/").concat(e),{method:"DELETE"});case 2:if(!(r=t.sent).error){t.next=6;break}throw console.error("USERS API DELETE /users/:username",r.error),new Error(r.error.message);case 6:case"end":return t.stop()}}),t)})))()},update:function(e,t){return o(n().mark((function r(){var s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u("".concat(i,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:t})});case 2:if(!(s=r.sent).error){r.next=6;break}throw console.error("USERS API PATCH /users/:username",s.error),new Error(s.error.message);case 6:case"end":return r.stop()}}),r)})))()},updatePassword:function(e,t){return o(n().mark((function r(){var s;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u("".concat(i,"/").concat(e,"/change-password"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:t})});case 2:if(!(s=r.sent).error){r.next=6;break}throw console.error("USERS API PATCH /users/:username/update-password",s.error),new Error(s.error.message);case 6:case"end":return r.stop()}}),r)})))()}}},31521:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(29474),n={name:"FullScreenSpinner",props:{iconClass:{type:String,default:""}},components:{Spinner:s.Z}},a=(0,r(51900).Z)(n,(function(){var e=this.$createElement;return(this._self._c||e)("Spinner",{staticClass:"absolute inset-0 text-primary-400",attrs:{"icon-class":"w-5"}})}),[],!1,null,null,null).exports},43862:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var s=r(87757),n=r.n(s),a=r(14571),o=r(6847),i={props:{user:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(e){return{editedUser:e.user}},watch:{user:function(){this.editedUser=this.user}},methods:{save:function(){this.$emit("save",this.editedUser)}},components:{Button:o.Z}},u=r(51900),c=(0,u.Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"shadow sm:rounded-2xl sm:overflow-hidden",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("div",{staticClass:"px-4 py-5 bg-primary-900 space-y-8 sm:p-6"},[r("div",{staticClass:"grid grid-cols-3 gap-6"},[r("div",{staticClass:"col-span-3 lg:csol-span-2"},[r("label",{staticClass:"forms-label",attrs:{for:"name"}},[e._v("\n\t\t\t\t\tDisplay Name\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.displayName,expression:"editedUser.displayName"}],staticClass:"forms-input-text",attrs:{type:"text",name:"name",id:"name",placeholder:"Display Name",disabled:e.loading,required:""},domProps:{value:e.editedUser.displayName},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"displayName",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:csol-span-2"},[r("label",{staticClass:"forms-label",attrs:{for:"username"}},[e._v("\n\t\t\t\t\tUsername\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.username,expression:"editedUser.username"}],staticClass:"forms-input-text",attrs:{type:"text",name:"username",id:"username",placeholder:"Username",disabled:e.loading,required:""},domProps:{value:e.editedUser.username},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"username",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:csol-span-2"},[r("label",{staticClass:"forms-label",attrs:{for:"avatarUrl"}},[e._v("\n\t\t\t\t\tAvatar URL\n\t\t\t\t")]),e._v(" "),r("div",{staticClass:"flex gap-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.editedUser.avatarUrl,expression:"editedUser.avatarUrl"}],staticClass:"forms-input-text",attrs:{type:"url",name:"avatarUrl",id:"avatarUrl",autocomplete:"photo",disabled:e.loading},domProps:{value:e.editedUser.avatarUrl},on:{input:function(t){t.target.composing||e.$set(e.editedUser,"avatarUrl",t.target.value)}}}),e._v(" "),r("div",{staticClass:"flex-shrink-0 w-10 h-10 bg-primary-800 rounded-full overflow-hidden"},[r("img",{attrs:{src:e.editedUser.avatarUrl}})])])])])]),e._v(" "),r("div",{staticClass:"px-4 py-3 bg-primary-700 text-right sm:px-6"},[r("Button",{staticClass:"bg-primary-800",attrs:{type:"submit",loading:e.loading}},[e._v("\n\t\t\tSave\n\t\t")])],1)])}),[],!1,null,null,null).exports,l={props:{loading:{type:Boolean,default:!1}},data:function(e){return{newPassword:"",repeatNewPassword:""}},methods:{save:function(){this.newPassword===this.repeatNewPassword?this.$emit("update-password",this.newPassword):this.$notify({title:"Passwords do not match",type:"error"})},reset:function(){this.newPassword="",this.repeatNewPassword=""}},components:{Button:o.Z}},d=(0,u.Z)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"shadow sm:rounded-2xl sm:overflow-hidden",on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("div",{staticClass:"px-4 py-5 bg-primary-900 space-y-8 sm:p-6"},[r("div",{staticClass:"grid grid-cols-3 gap-6"},[r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"forms-label",attrs:{for:"password"}},[e._v("\n\t\t\t\t\tNew password\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"forms-input-text",attrs:{type:"password",name:"new_password",id:"new-password",autocomplete:"new-password",placeholder:"Enter your new password",disabled:e.loading,required:""},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-span-3 lg:col-span-2"},[r("label",{staticClass:"forms-label",attrs:{for:"password"}},[e._v("\n\t\t\t\t\tRepeat new password\n\t\t\t\t")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatNewPassword,expression:"repeatNewPassword"}],staticClass:"forms-input-text",class:{"focus:border-green-500":e.newPassword===e.repeatNewPassword&&""!==e.newPassword},attrs:{type:"password",name:"new_password_repeat",id:"new-password-repeat",autocomplete:"new-password",placeholder:"Repeat your new password",disabled:e.loading,required:""},domProps:{value:e.repeatNewPassword},on:{input:function(t){t.target.composing||(e.repeatNewPassword=t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"px-4 py-3 bg-primary-700 text-right sm:px-6"},[r("Button",{staticClass:"bg-primary-800",attrs:{type:"submit",loading:e.loading}},[e._v("\n\t\t\tChange Password\n\t\t")])],1)])}),[],!1,null,null,null).exports;function p(e,t,r,s,n,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,n)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function o(e){p(a,s,n,o,i,"next",e)}function i(e){p(a,s,n,o,i,"throw",e)}o(void 0)}))}}var f={props:{user:{type:Object,required:!0}},data:function(){return{profileFormLoading:!1,passwordFormLoading:!1}},computed:{username:function(){return this.user.username===this.$store.state.user.username?"me":this.user.username}},methods:{save:function(e){var t=this;return m(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.profileFormLoading=!0,r.next=4,a.r.update(t.username,e);case 4:t.$notify({title:"Profile saved",type:"success"}),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0),t.$notify({title:"Could not save profile",text:r.t0.message,type:"error"});case 11:t.profileFormLoading=!1;case 12:case"end":return r.stop()}}),r,null,[[0,7]])})))()},updatePassword:function(e){var t=this;return m(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.passwordFormLoading=!0,r.next=4,a.r.updatePassword(t.username,e);case 4:t.$refs.passwords.reset(),t.$notify({title:"Password changed",type:"success"}),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error(r.t0),t.$notify({title:"Could not change password",text:r.t0.message,type:"error"});case 12:t.passwordFormLoading=!1;case 13:case"end":return r.stop()}}),r,null,[[0,8]])})))()}},components:{UserProfileForm:c,ChangePasswordForm:d}},v=(0,u.Z)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-4xl min-w-md"},[r("div",{staticClass:" mb-10"},[e._m(0),e._v(" "),r("div",{staticClass:"mt-5 md:mt-0 md:col-span-2"},[r("UserProfileForm",{attrs:{loading:e.profileFormLoading,user:e.user},on:{save:e.save}})],1)]),e._v(" "),r("div",{},[e._m(1),e._v(" "),r("div",{staticClass:"mt-5 md:mt-0 md:col-span-2"},[r("ChangePasswordForm",{ref:"passwords",attrs:{loading:e.passwordFormLoading},on:{"update-password":e.updatePassword}})],1)])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-6"},[r("div",{staticClass:"px-4 sm:px-0"},[r("h3",{staticClass:"text-lg leading-6 text-primary-100 font-semibold"},[e._v("\n\t\t\t\t\tProfile\n\t\t\t\t")]),e._v(" "),r("p",{staticClass:"mt-1 text-sm text-primary-300 font-semibold"},[e._v("\n\t\t\t\t\tYour Mission Control account\n\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mb-6"},[r("div",{staticClass:"px-4 sm:px-0"},[r("h3",{staticClass:"text-lg leading-6 text-primary-100 font-semibold"},[e._v("\n\t\t\t\t\tSecurity\n\t\t\t\t")]),e._v(" "),r("p",{staticClass:"mt-1 text-sm text-primary-300 font-semibold"},[e._v("\n\t\t\t\t\tChange your password\n\t\t\t\t")])])])}],!1,null,null,null).exports},66223:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(87757),n=r.n(s),a=r(14571),o=r(31521),i=r(43862),u=r(88927),c=r(88732);function l(e,t,r,s,n,a,o){try{var i=e[a](o),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(s,n)}var d={data:function(e){return{user:null,loading:!0}},mounted:function(){this.fetchUsers()},computed:{username:function(){return this.$route.params.username||"me"}},methods:{fetchUsers:function(){var e,t=this;return(e=n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,a.r.find(t.username);case 4:t.user=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error during fetch user",e.t0),t.$notify({type:"error",title:"Could not load user information",text:e.t0.message});case 11:t.loading=!1;case 12:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(s,n){var a=e.apply(t,r);function o(e){l(a,s,n,o,i,"next",e)}function i(e){l(a,s,n,o,i,"throw",e)}o(void 0)}))})()}},components:{FullScreenSpinner:o.Z,UserSettings:i.Z,topBarActions:u.Z,topBarButton:c.Z}},p=(0,r(51900).Z)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"dashboard-page p-5 md:p-12"},[e.user?r("UserSettings",{attrs:{user:e.user}}):r("FullScreenSpinner",{staticClass:"w-full text-primary-600",attrs:{"icon-class":"w-16"}})],1)}),[],!1,null,null,null).exports}}]);