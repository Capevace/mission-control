(self.webpackChunkmission_control_dashboard=self.webpackChunkmission_control_dashboard||[]).push([[641],{14571:function(e,r,t){"use strict";t.d(r,{r:function(){return l}});var n=t(87757),a=t.n(n);function s(e,r,t,n,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,a)}function o(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function u(e){s(o,n,a,u,c,"next",e)}function c(e){s(o,n,a,u,c,"throw",e)}u(void 0)}))}}var u="/users";function c(e,r){return i.apply(this,arguments)}function i(){return(i=o(a().mark((function e(r,t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r,t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l={all:function(){return o(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(u,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}});case 2:if(!(r=e.sent).error){e.next=6;break}throw console.error("USERS API GET /users",r.error),new Error(r.error.message);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))()},find:function(e){return o(a().mark((function r(){var t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c("".concat(u,"/").concat(e));case 2:if(!(t=r.sent).error){r.next=6;break}throw console.error("USERS API GET /users/"+e,t.error),new Error(t.error.message);case 6:return r.abrupt("return",t.user);case 7:case"end":return r.stop()}}),r)})))()},create:function(e){return o(a().mark((function r(){var t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c("".concat(u),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:e})});case 2:if(!(t=r.sent).error){r.next=6;break}throw console.error("USERS API PATCH /users/:username",t.error),new Error(t.error.message);case 6:case"end":return r.stop()}}),r)})))()},delete:function(e){return o(a().mark((function r(){var t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c("".concat(u,"/").concat(e),{method:"DELETE"});case 2:if(!(t=r.sent).error){r.next=6;break}throw console.error("USERS API DELETE /users/:username",t.error),new Error(t.error.message);case 6:case"end":return r.stop()}}),r)})))()},update:function(e,r){return o(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c("".concat(u,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({user:r})});case 2:if(!(n=t.sent).error){t.next=6;break}throw console.error("USERS API PATCH /users/:username",n.error),new Error(n.error.message);case 6:case"end":return t.stop()}}),t)})))()},updatePassword:function(e,r){return o(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c("".concat(u,"/").concat(e,"/change-password"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:r})});case 2:if(!(n=t.sent).error){t.next=6;break}throw console.error("USERS API PATCH /users/:username/update-password",n.error),new Error(n.error.message);case 6:case"end":return t.stop()}}),t)})))()}}},42951:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n;function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var u={props:(n={value:{type:String,default:""},type:{type:String,default:"text"}},o(n,"value",{type:String}),o(n,"name",{type:String}),o(n,"loading",{type:Boolean,default:!1}),o(n,"disabled",{type:Boolean,default:!1}),o(n,"required",{type:Boolean,default:!1}),n),computed:{listeners:function(){return s(s({},this.$listeners),{},{input:this.onInput.bind(this)})}},methods:{onBlur:function(e){e.target.reportValidity()},onInput:function(e){this.$emit("input",e.target.value)}}},c=(0,t(51900).Z)(u,(function(){var e=this,r=e.$createElement;return(e._self._c||r)("select",{staticClass:"forms-select",attrs:{name:e.name,id:e.name},domProps:{value:e.value},on:{input:e.onInput}},[e._t("default")],2)}),[],!1,null,null,null).exports},19484:function(e,r,t){"use strict";t.d(r,{Z:function(){return g}});var n=t(87757),a=t.n(n),s=t(14571),o=t(6847),u=t(5628),c=t(68921);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var p={components:{TextInput:c.Z},props:{value:{type:String,default:""},loading:{type:Boolean,default:!1}},computed:{listeners:function(){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},this.$listeners)}},methods:{}},f=t(51900),d=(0,f.Z)(p,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"flex gap-3"},[t("TextInput",e._g(e._b({attrs:{type:"url",loading:e.loading}},"TextInput",Object.assign({},e.$props,e.$attrs),!1),e.listeners)),e._v(" "),t("div",{staticClass:"flex-shrink-0 w-10 h-10 bg-primary-700  rounded-full overflow-hidden"},[t("img",{attrs:{src:e.value}})])],1)}),[],!1,null,null,null).exports,m=t(42951);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){w(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function y(e,r,t,n,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,a)}var h={components:{Button:o.Z,Label:u.Z,TextInput:c.Z,AvatarUrlInput:d,SelectInput:m.Z},data:function(){return{user:{username:"",displayName:"",avatarUrl:"",role:"guest",password:"",repeatPassword:""}}},methods:{create:function(){var e,r=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===r.user.password||r.user.password===r.user.repeatPassword){e.next=3;break}return e.abrupt("return",r.$notify({type:"error",title:"Passwords don't match"}));case 3:return r.loading=!0,e.next=6,s.r.create(b(b({},r.user),{},{avatarUrl:""!==r.user.avatarUrl?r.user.avatarUrl:null,repeatPassword:void 0}));case 6:r.$notify({type:"success",title:"User ".concat(r.user.username," created")}),r.user={},e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("error during create user",e.t0.message),r.$notify({type:"error",title:"Could not create user",text:e.t0.message});case 14:r.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){y(s,n,a,o,u,"next",e)}function u(e){y(s,n,a,o,u,"throw",e)}o(void 0)}))})()}}},g=(0,f.Z)(h,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("form",{staticClass:"max-w-4xl",on:{submit:function(r){return r.preventDefault(),e.create(r)}}},[t("h3",{staticClass:"text-lg leading-6 text-primary-100 font-semibold mb-1"},[e._v("\n\t\tCreate a new user\n\t")]),e._v(" "),t("p",{staticClass:"mb-10 text-sm text-primary-300 font-semibold"},[e._v("\n\t\tMission control users can manage and interact with the system.\n\t")]),e._v(" "),t("Label",{staticClass:"mb-4",attrs:{label:"Username",name:"username"}},[t("TextInput",{attrs:{type:"text",name:"username",placeholder:"Username",required:""},model:{value:e.user.username,callback:function(r){e.$set(e.user,"username",r)},expression:"user.username"}})],1),e._v(" "),t("Label",{staticClass:"mb-4",attrs:{label:"Display Name",name:"name"}},[t("TextInput",{attrs:{type:"text",name:"name",placeholder:"Display Name",required:""},model:{value:e.user.displayName,callback:function(r){e.$set(e.user,"displayName",r)},expression:"user.displayName"}})],1),e._v(" "),t("Label",{staticClass:"mb-4",attrs:{label:"Avatar URL",name:"avatarUrl"}},[t("AvatarUrlInput",{attrs:{type:"text",name:"avatarUrl",placeholder:"Avatar URL",required:""},model:{value:e.user.avatarUrl,callback:function(r){e.$set(e.user,"avatarUrl",r)},expression:"user.avatarUrl"}})],1),e._v(" "),t("Label",{staticClass:"mb-4",attrs:{label:"Role",name:"role"}},[t("SelectInput",{attrs:{name:"role",placeholder:"Role",required:""},model:{value:e.user.role,callback:function(r){e.$set(e.user,"role",r)},expression:"user.role"}},[t("option",{attrs:{value:"guest"}},[e._v("Guest")]),e._v(" "),t("option",{attrs:{value:"user"}},[e._v("User")]),e._v(" "),t("option",{attrs:{value:"admin"}},[e._v("Admin")])])],1),e._v(" "),t("Label",{staticClass:"mb-4",attrs:{label:"Password",name:"new_password"}},[t("TextInput",{attrs:{type:"password",name:"new_password",autocomplete:"new-password",placeholder:"Enter your new password",required:""},model:{value:e.user.password,callback:function(r){e.$set(e.user,"password",r)},expression:"user.password"}})],1),e._v(" "),t("Label",{staticClass:"mb-8",attrs:{label:"Repeat password",name:"new_password_repeat"}},[t("TextInput",{class:{"focus:border-green-500":e.user.password===e.user.repeatPassword&&""!==e.user.password},attrs:{type:"password",name:"new_password_repeat",autocomplete:"new-password",placeholder:"Repeat your password",required:""},model:{value:e.user.repeatPassword,callback:function(r){e.$set(e.user,"repeatPassword",r)},expression:"user.repeatPassword"}})],1),e._v(" "),t("div",{staticClass:"flex justify-end"},[t("Button",{staticClass:"forms-button",attrs:{type:"submit"}},[e._v("\n\t\t\tCreate user\n\t\t")])],1)],1)}),[],!1,null,null,null).exports},18502:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var n=t(87757),a=t.n(n),s=t(14571),o=t(19484),u=t(88927),c=t(88732);function i(e,r,t,n,a,s,o){try{var u=e[s](o),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,a)}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){f(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var d={username:"",displayName:"",role:"user",avatarUrl:"",password:"",repeatPassword:""},m={data:function(e){return{loading:!1,user:p({},d)}},methods:{createUser:function(e){var r,t=this;return(r=a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.loading=!0,r.next=4,s.r.create(p(p({},e),{},{avatarUrl:""!==e.avatarUrl?e.avatarUrl:null,repeatPassword:void 0}));case 4:t.user=p({},d),t.$notify({type:"success",title:"User ".concat(e.username," created")}),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error("error during create user",r.t0.message),t.$notify({type:"error",title:"Could not create user",text:r.t0.message});case 12:t.loading=!1;case 13:case"end":return r.stop()}}),r,null,[[0,8]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var s=r.apply(e,t);function o(e){i(s,n,a,o,u,"next",e)}function u(e){i(s,n,a,o,u,"throw",e)}o(void 0)}))})()}},components:{CreateUserForm:o.Z,topBarActions:u.Z,topBarButton:c.Z}},v=(0,t(51900).Z)(m,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("main",{staticClass:"dashboard-page p-5 md:p-12"},[e.loading?t("loading",{staticClass:"w-full text-primary-600",attrs:{"icon-class":"w-16"}}):e._e(),e._v(" "),t("CreateUserForm",{attrs:{user:e.user}})],1)}),[],!1,null,null,null).exports}}]);